<!DOCTYPE HTML>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="renderer" content="webkit">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="description" content="实时统计BEJ48的鸡腿总数，包括各队比例，各分组以及个人占比，每周每人的分组统计…" />
	<meta name="keywords" content="SNH48, BEJ48, GNZ48, 偶像应援" />
	<meta name="format-detection" content="telephone=no,email=no,adress=no">
	<meta name="apple-mobile-web-app-capable" content="no" />
	<meta itemprop="image" content="http://www.vanguardstars.com/admin/UI/attached/image/20170420/20170420214324_49303.jpg"/>
	<title>实时鸡腿统计方式 - 有糖鸡腿榜</title>
	<link href="http://48.mowchan.me/usr/themes/SimpleStone/assets/img/favicon.ico" rel="shortcut icon">
	<link href="http://48.mowchan.me/usr/themes/SimpleStone/assets/css/style.css" rel="stylesheet">
	<link href="http://cdn.bootcss.com/font-awesome/5.13.0/css/fontawesome.min.css" rel="stylesheet">
	<script src="http://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
	<script src="http://cdn.bootcss.com/highcharts/8.0.4/highcharts.min.js"></script>
	<script src="http://cdn.bootcss.com/highcharts/8.0.4/modules/sunburst.min.js"></script>
	<!--[if lt IE 9]>
	<script src="http://cdn.bootcss.com/html5shiv/r29/html5.min.js"></script>
	<script src="http://cdn.bootcss.com/respond.js/1.4.1/respond.min.js"></script>
	<![endif]-->
</head>
<body>
<div class="wrap">
	<header>
		<a href="http://ut.48.mowchan.me/" class="logo-link">
			<img src="http://48.mowchan.me/usr/themes/SimpleStone/assets/logo-48g.svg">
		</a>
		<li class="nav-list-item">
			<a href="./">首页</a>
		</li>
		<li class="nav-list-item">
			<a class="nav-list-link active"href="./realtime-summation.html">鸡腿榜</a>
		</li>
		<li class="nav-list-item">
			<a  href="./more-summation.html">更多统计</a>
		</li>
		<li class="nav-list-item">
			<a href="./group.html">分组安排</a>
		</li>
	</header>
	<section class="container">
		<div class="post">
			<div id="sunburst_pk_team_sum">
			</div>
			<p>统计口径：从2020年4月24日开始《春分另一半》后各场公演、联合公演直播的鸡腿总数（<b>不含综艺直播</b>）</p>
			<br>
			<div id="sunburst_pk_act_group_sum">
			</div>
			<p>统计口径：从2020年4月24日开始《春分另一半》后各场公演、联合公演直播的鸡腿总数（<b>不含综艺直播</b>）</p>
			<br>
			<div id="bar_stage_week_sum">
			</div>
			<p>统计口径：从2020年3月15日恢复公演开始<b>只包含各队公演及联合公演直播</b>的鸡腿总数， <b>不含综艺直播</b>，其中3月2日（星期一）开始算作第1周，3月15日（星期日）恢复公演是第2周，以此类推（如4月20日为第8周）</p>
			<br>
		</div>
		<div class="post">
			<div>
				<h3>声明</h3>
				<p>本站数据均来源于「口袋48」数据同步有一定延迟故各项排名仅供参考，一切结果以官方说明为准</p>
				<p>本站的数据、照片以及分析只能用于学习交流，严禁任何组织或个人用于商业用途，其版权归原公司所有</p>
			</div>
		</div>
	</section>
	<footer>
		<div class="copyright">
			&copy; 2018 - 2020 <a href="http://48.mowchan.me/">喵酱48</a><br>
		</div>
	</footer>
</div>
<script type="text/javascript">

	var dt = new Date();
	var ts = '?' + dt.getFullYear().toString() + (dt.getMonth() + 1).toString() + dt.getDate().toString() + dt.getHours().toString();

	Highcharts.setOptions({
		lang: {
				thousandsSep: ','
		}
	})

	$.getJSON("data/pk_team_sum.json" + ts, function(data){
		$('#sunburst_pk_team_sum').highcharts({
			chart: {
				height: '480px'
			},
			title: {
				text: data['title']
			},
			subtitle: {
				text: '数据更新于：' + data['time']
			},
			series: [{
				type: "sunburst",
				data: data['data'],
				allowDrillToNode: true,
				cursor: 'pointer',
				dataLabels: {
					formatter: function() {
						var point = this.point,
								group = this.series.data.filter(x => x.parent === point.parent);
						var groupTotal = group.map(x => x.value).reduce((a, b) => a + b, 0),
								percentage = 100 * point.value/groupTotal;
						return point.name + '<br>' + percentage.toFixed(1) + '%';
					}
				},
				levels: [{
					level: 1,
					levelIsConstant: false
				}, {
					level: 2,
					colorByPoint: true
				},
				{
					level: 3,
					colorVariation: {
						key: 'brightness',
						to: 0.24
					}
				}]
			}],
			tooltip: {
				headerFormat: "",
				pointFormat: '<b>{point.name}</b> 获得 <b>{point.value}</b> 个鸡腿'
			}
		})
	})

	$.getJSON("data/pk_act_group_sum.json" + ts, function(data){
		$('#sunburst_pk_act_group_sum').highcharts({
			chart: {
				height: '480px'
			},
			title: {
				text: data['title']
			},
			subtitle: {
				text: '数据更新于：' + data['time']
			},
			series: [{
				type: "sunburst",
				data: data['data'],
				allowDrillToNode: true,
				cursor: 'pointer',
				dataLabels: {
					formatter: function() {
						var point = this.point,
								group = this.series.data.filter(x => x.parent === point.parent);
						var groupTotal = group.map(x => x.value).reduce((a, b) => a + b, 0),
								percentage = 100 * point.value/groupTotal;
						return point.name + '<br>' + percentage.toFixed(1) + '%';
					}
				},
				levels: [{
					level: 1,
					levelIsConstant: false
				}, {
					level: 2,
					colorByPoint: true
				},
				{
					level: 3,
					colorVariation: {
						key: 'brightness',
						to: 0.24
					}
				}]
			}],
			tooltip: {
				headerFormat: "",
				pointFormat: '<b>{point.name}</b> 获得 <b>{point.value}</b> 个鸡腿'
			}
		})
	})

	$.getJSON("data/all_week_sum.json" + ts, function(data){
		$('#bar_all_week_sum').highcharts({
			chart: {
				type: 'bar',
				height: 800
			},
			title: {
				text: data['title']
			},
			subtitle: {
				text: '数据更新于：' + data['time']
			},
			xAxis: {
				categories: data['categories'],
				labels: {
						step: 1
				}
			},
			yAxis: {
				title: {
					text: ' '
				}
			},
			legend: {
				backgroundColor: '#FFFFFF',
				reversed: true
			},
			tooltip: {
				tooltip: {
					headerFormat: '<b>{point.key}</b>',
					pointFormat: '{series.name}: {point.y} 个鸡腿',
					valueDecimals: 1
				},
			},
			plotOptions: {
				series: {
					stacking: 'normal'
				}, dataLabels: {
					enabled: true,
					format: '{y :.1f}'
				}
			},
			series: data['series']
		})
	})

	$.getJSON("data/stage_week_sum.json" + ts, function(data){
		$('#bar_stage_week_sum').highcharts({
			chart: {
				type: 'bar',
				height: 800
			},
			title: {
				text: data['title']
			},
				subtitle: {
					text: '数据更新于：' + data['time']
				},
			xAxis: {
				categories: data['categories'],
				labels: {
						step: 1
				}
			},
			yAxis: {
				title: {
					text: ' '
				}
			},
			legend: {
				backgroundColor: '#FFFFFF',
				reversed: true
			},
			tooltip: {
				tooltip: {
					headerFormat: '<b>{point.key}</b>',
					pointFormat: '{series.name}: {point.y} 个鸡腿',
					valueDecimals: 1
				},
			},
			plotOptions: {
				series: {
					stacking: 'normal'
				},
				dataLabels: {
					enabled: true,
					format: '{y :.1f}'
				}
			},
			series: data['series']
		})
	})

</script>
<script src="http://cdn.bootcss.com/pangu/4.0.7/pangu.min.js"></script>
<script>
	pangu.spacingElementByClassName('post');
</script>
</body>
</html>