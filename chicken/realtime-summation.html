<!DOCTYPE HTML>
<html lang="zh-CN">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="renderer" content="webkit">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta name="description" content="笨队队推 佛系更新 ~" />
	<meta name="keywords" content="SNH48, BEJ48, GNZ48, 偶像应援" />
	<title>实时鸡腿总数统计 - 有糖鸡腿榜</title>
	<link href="http://48.mowchan.me/usr/themes/SimpleStone/assets/img/favicon.ico" rel="shortcut icon">
	<link href="http://48.mowchan.me/usr/themes/SimpleStone/assets/css/style.css" rel="stylesheet">
	<link href="http://cdn.bootcss.com/font-awesome/5.13.0/css/fontawesome.min.css" rel="stylesheet">
	<script src="http://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
	<script src="http://cdn.bootcss.com/highcharts/8.0.4/highcharts.min.js"></script>
	<script src="http://cdn.bootcss.com/highcharts/8.0.4/modules/sunburst.min.js"></script>
	<!--[if lt IE 9]>
	<script src="http://cdn.bootcss.com/html5shiv/r29/html5.min.js"></script>
	<script src="http://cdn.bootcss.com/respond.js/1.4.1/respond.min.js"></script>
	<![endif]-->
</head>
<body>
<div class="wrap">
	<header>
		<a href="http://ut.48.mowchan.me/" class="logo-link">
			<img src="http://48.mowchan.me/usr/themes/SimpleStone/assets/logo-48g.svg">
		</a>
		<li class="nav-list-item">
			<a href="http://ut.48.mowchan.me/">首页</a>
		</li>
		<li class="nav-list-item">
			<a class="nav-list-link active" href="http://ut.48.mowchan.me/chicken/">有糖鸡腿榜</a>
		</li>
		<li class="nav-list-item">
			<a href="http://ut.48.mowchan.me/stage/">公演</a>
		</li>
		<li class="nav-list-item">
			<a href="http://48.mowchan.me/show/">b站</a>
		</li>
	</header>
	<section class="container">
		<div class="post">
			<div id="sunburst_all_team_sum">
			</div>
			<div id="sunburst_all_act_group_sum">
			</div>
		</div>
	</section>
	<footer>
		<div>
			<h4>声明</h4>
			<p>本站数据均来源于「口袋48」数据同步有一定延迟故各项排名仅供参考，一切结果以官方说明为准</p>
			<p>本站的数据、照片以及分析只能用于学习交流，严禁任何组织或个人用于商业用途，其版权归原公司所有</p>
		</div>
		<div class="copyright">
			&copy; 2018 - 2020 <a href="http://48.mowchan.me/">喵酱48</a><br>
		</div>
	</footer>
</div>
<script type="text/javascript">

	Highcharts.setOptions({
		lang: {
				thousandsSep: ','
		}
	})

	$.getJSON("data/all_team_sum.json",function(data){
		$('#sunburst_all_team_sum').highcharts({
			title: {
				text: data['title']
			},
			subtitle: {
				text: '数据更新于：' + data['time']
			},
			series: [{
				type: "sunburst",
				data: data['data'],
				allowDrillToNode: true,
				cursor: 'pointer',
				dataLabels: {
					formatter: function() {
						var point = this.point,
								group = this.series.data.filter(x => x.parent === point.parent);
						var groupTotal = group.map(x => x.value).reduce((a, b) => a + b, 0),
								percentage = 100 * point.value/groupTotal;
						return point.name + '<br>' + percentage.toFixed(1) + '%';
					}
				},
				levels: [{
					level: 1,
					levelIsConstant: false
				}, {
					level: 2,
					colorByPoint: true
				},
				{
					level: 3,
					colorVariation: {
						key: 'brightness',
						to: 0.24
					}
				}]
			}],
			tooltip: {
				headerFormat: "",
				pointFormat: '<b>{point.name}</b> 获得 <b>{point.value}</b> 个鸡腿'
			}
		})
	})

	$.getJSON("data/all_act_group_sum.json",function(data){
		$('#sunburst_all_act_group_sum').highcharts({
			title: {
				text: data['title']
			},
			subtitle: {
				text: '数据更新于：' + data['time']
			},
			series: [{
				type: "sunburst",
				data: data['data'],
				allowDrillToNode: true,
				cursor: 'pointer',
				dataLabels: {
					formatter: function() {
						var point = this.point,
								group = this.series.data.filter(x => x.parent === point.parent);
						var groupTotal = group.map(x => x.value).reduce((a, b) => a + b, 0),
								percentage = 100 * point.value/groupTotal;
						return point.name + '<br>' + percentage.toFixed(1) + '%';
					}
				},
				levels: [{
					level: 1,
					levelIsConstant: false
				}, {
					level: 2,
					colorByPoint: true
				},
				{
					level: 3,
					colorVariation: {
						key: 'brightness',
						to: 0.24
					}
				}]
			}],
			tooltip: {
				headerFormat: "",
				pointFormat: '<b>{point.name}</b> 获得 <b>{point.value}</b> 个鸡腿'
			}
		})
	})

</script>
<script src="http://cdn.bootcss.com/pangu/4.0.7/pangu.min.js"></script>
</body>
</html>